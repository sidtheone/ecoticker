# US-2.1 Implementation Workflow: Show Which Articles Informed the Latest Score

**Date:** 2026-02-13
**Story:** US-2.1 — Show which articles were analyzed to produce the current score so journalists can verify LLM reasoning against source material
**Persona:** Journalist (verification-focused)
**Branch:** `v2`
**Dependencies:** US-1.1 (DONE)
**Complexity:** S

---

## Current State Analysis

### What Exists
- Topic detail page at `src/app/topic/[slug]/page.tsx` — client component fetching `/api/topics/${slug}`
- Sub-score breakdown (US-1.2) renders 3 dimension cards with reasoning text that already cites specific articles
- `ArticleList` component renders all articles sorted by date below the score chart
- `topic.articleCount` is available in the `TopicDetail` response
- Layout order: header → impact summary → sub-score breakdown → score chart → article list

### Problems to Solve / Key Design Decisions
1. **Placement:** The "Latest score based on N articles" line should appear between the sub-score breakdown and the score chart, tying the scores above to the articles below.
2. **Zero articles case:** Show "No articles available for this topic" instead.
3. **Minimal change:** This is purely a UI label — no API or data model changes.

---

## Target State
- A text line appears after the sub-score breakdown: "Latest score based on N articles" (or zero-state message)
- The existing reasoning text in dimension cards + the article list below remain the primary verification mechanism
- No new components, no API changes

---

## Implementation Phases

### Phase 1: Add article count line to topic detail page (~12 lines)
**File:** `src/app/topic/[slug]/page.tsx`
**Changes:**
1. After the sub-score breakdown section (after the `allInsufficient` notice, before the ScoreChart `<div className="mb-6">`), add:
```tsx
{/* Article count attribution */}
<div className="mb-4 text-sm text-stone-500 dark:text-gray-400" data-testid="article-count-line">
  {topic.articleCount > 0
    ? `Latest score based on ${topic.articleCount} article${topic.articleCount !== 1 ? "s" : ""}`
    : "No articles available for this topic"}
</div>
```

### Phase 2: Add tests (~20 lines)
**File:** `tests/topic-detail.test.tsx`
**Changes:**
1. Add test: when topic has articles, renders "Latest score based on N articles"
2. Add test: when topic has 1 article, renders "Latest score based on 1 article" (no plural)
3. Add test: when topic has 0 articles, renders "No articles available for this topic"

### Phase 3: Verify & Validate
1. Run `npx jest tests/topic-detail.test.tsx` — all pass
2. Run `npx jest` — full suite passes
3. Run `npm run build` — no TypeScript errors
4. Visual check: line appears between sub-scores and chart, muted styling consistent with page

---

## User Journeys
### Journey 1: Journalist — verifying a high score
1. Journalist sees a topic with score 85 (Breaking) on the dashboard
2. Clicks into the topic detail page
3. Reads sub-score breakdown with reasoning citing specific articles
4. Sees "Latest score based on 4 articles" — knows the sample size
5. Scrolls to article list below to read the original sources
6. Cross-references the reasoning citations with the actual articles

### Journey 2: Journalist — topic with no articles
1. Journalist clicks on a newly created topic that hasn't been scored yet
2. Sees "No articles available for this topic"
3. Understands the score may be stale or default

---

## Files Changed Summary
| File | Action | Est. Lines |
|------|--------|-----------|
| `src/app/topic/[slug]/page.tsx` | Add article count attribution line | +6 |
| `tests/topic-detail.test.tsx` | Add 3 test cases | +20 |

## Risks
- Very minor: if `articleCount` is undefined/null for legacy data, the ternary handles it (0 is falsy, shows zero-state message)

## Definition of Done
- [ ] "Latest score based on N articles" line renders on topic detail page
- [ ] Correct pluralization (1 article vs N articles)
- [ ] Zero-article state shows "No articles available for this topic"
- [ ] Line positioned between sub-score breakdown and score chart
- [ ] Muted styling consistent with page design
- [ ] All existing tests pass
- [ ] New tests cover all 3 cases (multiple, singular, zero)
- [ ] Build passes with no TypeScript errors
